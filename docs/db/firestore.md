# Firestore Data Structure

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€Interrogation Roomã‚¢ãƒ—ãƒªã§ä½¿ç”¨ã™ã‚‹Firestoreã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’å®šç¾©ã—ã¾ã™ã€‚

## users/{userId}

èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã¨è¨­å®šã‚’ä¿æŒã™ã‚‹ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³

ğŸ“„ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å®šç¾©

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å       | å‹         | NULLå¯ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ | èª¬æ˜                              |
|--------------------|------------|--------|-------------|----------------------------------|
| userId            | string     | Ã—      | ãªã—        | Firebase UIDï¼ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆIDã¨åŒã˜ï¼‰ |
| displayName       | string     | Ã—      | ãªã—        | è¡¨ç¤ºåï¼ˆãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ï¼‰              |
| email             | string     | Ã—      | ãªã—        | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹           |
| provider          | string     | Ã—      | ãªã—        | SSOãƒ­ã‚°ã‚¤ãƒ³ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å           |
| createdAt         | timestamp  | Ã—      | ã‚µãƒ¼ãƒæ™‚åˆ»   | åˆå›ãƒ­ã‚°ã‚¤ãƒ³æ—¥æ™‚                   |
| lastLoginAt       | timestamp  | Ã—      | ã‚µãƒ¼ãƒæ™‚åˆ»   | æœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³æ—¥æ™‚                   |
| preferences       | map        | â—‹      | {}          | ãƒ†ãƒ¼ãƒãªã©ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®š           |

ğŸ§ª ä¾‹
```
{
  "userId": "abc123",
  "displayName": "Sachiko",
  "email": "sachi@example.com",
  "provider": "google",
  "createdAt": "2024-01-01T00:00:00Z",
  "lastLoginAt": "2024-05-30T12:34:56Z",
  "preferences": {
    "lang": "ja"
  }
}
```

## cases/{caseId}

ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé€²è¡Œä¸­ã¾ãŸã¯å®Œäº†ã—ãŸå°‹å•ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’è¨˜éŒ²ã™ã‚‹ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³

ğŸ“„ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å®šç¾©

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å       | å‹         | NULLå¯ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ | èª¬æ˜                              |
|--------------------|------------|--------|-------------|----------------------------------|
| caseId            | string     | Ã—      | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆID | ã‚±ãƒ¼ã‚¹IDï¼ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆIDã¨åŒã˜ï¼‰   |
| userId            | string     | Ã—      | ãªã—        | ã“ã®ã‚±ãƒ¼ã‚¹ã®æ‰€æœ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼           |
| status            | string     | Ã—      | in_progress | â€œin_progressâ€ / â€œconfessedâ€ / â€œfailedâ€ |
| createdAt         | timestamp  | Ã—      | ã‚µãƒ¼ãƒæ™‚åˆ»   | é–‹å§‹æ—¥æ™‚                          |
| lastUpdated       | timestamp  | Ã—      | ã‚µãƒ¼ãƒæ™‚åˆ»   | æœ€çµ‚æ›´æ–°æ—¥æ™‚                      |
| logs              | array      | Ã—      | []          | ãƒãƒ£ãƒƒãƒˆãƒ­ã‚°ï¼ˆç™ºè¨€é †ï¼‰             |

ğŸ§ª ä¾‹
```
{
  "caseId": "case123",
  "userId": "sachi456",
  "status": "in_progress",
  "createdAt": "2024-05-30T10:00:00Z",
  "lastUpdated": "2024-05-30T10:10:00Z",
  "logs": [
    { "role": "user", "message": "ä½•æ™‚ã«å¸°ã£ãŸã®ï¼Ÿ" },
    { "role": "suspect", "message": "7æ™‚ã«ã¯å‡ºã¾ã—ãŸ" }
  ]
}
```